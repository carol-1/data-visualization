<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../lib/echarts.min.js"></script>
    <script src="../lib/jquery.min.js"></script>
    <style>
        div {
            width: 800px;
            height: 600px;
        }
    </style>
</head>

<body>
    <div></div>
    <script>
        var mCharts = echarts.init(document.querySelector('div'));
        mCharts.showLoading();
        $.get('../data/testdata.json', function(ret) {
            console.log(ret);
            mCharts.hideLoading()
            var axisData = [];
            for (var i = 0; i < ret.length; i++) {
                var height = ret[i].height;
                var weight = ret[i].weight;
                var newArr = [height, weight];
                axisData.push(newArr);
            }
            console.log(axisData);
            var option = {
                xAxis: {
                    type: 'value',
                    scale: true
                },
                yAxis: {
                    type: 'value',
                    scale: true
                },
                series: [{
                    //type: 'scatter', // 指明图表的类型为散点图
                    type: 'effectScatter',
                    showEffectOn: 'emphasis', //控制鼠标经过才有涟漪动画
                    rippleEffect: {
                        scale: 10
                    }, //控制涟漪动画的时间
                    data: axisData,
                    //symbolSize:30
                    symbolSize: function(arg) {
                        var height = arg[0] / 100;
                        var weight = arg[1];
                        var bmi = weight / (height * height);
                        if (bmi > 28) {
                            return 20;
                        }
                        return 5;

                    },
                    itemStyle: {
                        color: function(arg) {
                            var height = arg.data[0] / 100;
                            var weight = arg.data[1];
                            var bmi = weight / (height * height);
                            if (bmi > 28) {
                                return 'red';
                            }
                            return 'green';


                        }
                    }
                }]

            };

            //初始化对象
            mCharts.setOption(option);
        })
    </script>
</body>

</html>